<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synchronized Media Player</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="style.css">

    <!-- p5.js and p5.dom.js libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.dom.min.js"></script>

</head>
<!-- Start in dark mode by default -->

<body class="dark-mode">

    <div id="main-content">
        <!-- Canvas Container -->
        <div id="canvas-container">
            <!-- p5.js canvas will be inserted here by sketch.js -->
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <!-- Top Controls Row -->
            <div id="top-controls" class="controls-group">
                <!-- Left-aligned controls -->
                <div class="left-controls">
                    <!-- UPDATED: Clear buttons are now here -->
                    <button id="clear-all-btn" class="btn btn-danger">Clear All</button>
                    <button id="clear-grid-btn" class="btn btn-danger">Clear Grid</button>
                    <!-- Grid-specific layout controls -->
                    <div class="grid-layout-controls">
                        <div class="layout-controls">
                            <label for="cols-input">Columns:</label>
                            <input type="number" id="cols-input" min="1" value="">
                        </div>
                        <div class="layout-controls">
                            <label for="rows-input">Rows:</label>
                            <input type="number" id="rows-input" min="1" value="">
                        </div>
                        <button id="auto-layout-btn" class="btn">Auto</button>
                    </div>
                </div>

                <!-- Centered playback controls -->
                <div class="centered-controls">
                    <button id="loop-btn" class="btn icon-btn" title="Toggle Loop"></button>
                    <button id="prev-frame-btn" class="btn">&lt;&lt;</button>
                    <button id="play-pause-btn" class="btn">Play</button>
                    <button id="next-frame-btn" class="btn">&gt;&gt;</button>
                    <!-- Playback speed control -->
                    <div id="speed-control-wrapper" class="speed-control-wrapper">
                        <button id="speed-btn" class="btn icon-btn" title="Playback Speed">
                            <!-- SVG icon will be injected by JS -->
                        </button>
                        <div id="speed-menu" class="speed-menu">
                            <label for="speed-slider">Speed</label>
                            <input type="range" id="speed-slider" class="slider" min="0" max="8" value="4" step="1">
                            <span id="speed-display">1.00x</span>
                        </div>
                    </div>
                </div>

                <!-- Right-aligned zoom control -->
                <div class="zoom-control">
                    <button id="compare-side-btn" class="btn" style="font-size:30px; line-height: 0; height: 38px; padding: 0 10px;">◑</button>
                    <button id="view-mode-btn" class="btn">Split View</button>
                    <label for="zoom-slider">Zoom:</label>
                    <input type="range" id="zoom-slider" class="slider" min="1" max="10" value="1" step="0.1">
                    <span id="zoom-display">1.0x</span>
                </div>
            </div>

            <!-- Seek Bar (A-B LOOP: WRAPPED SEEKBAR) -->
            <div class="controls-group">
                <!-- Base playback position -->
                <input type="range" id="seek-slider" class="slider" min="0" max="1000" value="0" disabled>

                <!-- A marker (left) -->
                <input type="range" id="ab-start-slider" class="slider" min="0" max="1000" value="0">

                <!-- B marker (right) -->
                <input type="range" id="ab-end-slider" class="slider" min="0" max="1000" value="1000">
            </div>

            <!-- Sub-Seekbar Controls -->
            <div id="sub-seekbar-controls">
                <div class="framerate-control-wrapper">
                    <div class="layout-controls">
                        <label for="framerate-input">Frame Rate:</label>
                        <input type="number" id="framerate-input" min="1" value="16">
                    </div>
                </div>
                <div class="time-display-container">
                    <div id="timecode">00:00.00 / 00:00.00</div>
                    <div id="frame-counter">0 / 0</div>
                </div>
                <!-- Controls reordered and new help button added -->
                <div class="right-controls-wrapper">
                    <!-- A-B toggle -->
                    <div style="display:flex; gap:8px; align-items:center; flex-direction: column;">
                        <button id="ab-toggle-btn" class="btn">A-B Loop: Off</button>
                        <span id="ab-range-readout">A 00:00.00 → B 00:00.00</span>
                    </div>
                    <div class="import-controls-wrapper">
                        <input type="file" id="file-input" multiple accept="video/*,image/*" style="display: none;">
                        <button id="import-media-btn" class="btn">Import Media</button>
                    </div>
                    <button id="theme-toggle-btn" class="btn icon-btn" title="Switch Theme">
                        <!-- SVG icon will be injected by JS -->
                    </button>
                    <button id="help-btn" class="btn icon-btn btn-danger" title="Help">
                        <!-- SVG icon will be injected by JS -->
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Link to external JavaScript file -->
    <script src="sketch.js"></script>
</body>

</html>